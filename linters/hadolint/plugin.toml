config_version = "0"

[plugins.downloads.hadolint]
download_type = "executable"

[[plugins.downloads.hadolint.system]]
cpu = "x86_64"
os = "linux"
url = "https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Linux-x86_64"

[[plugins.downloads.hadolint.system]]
cpu = "aarch64"
os = "linux"
url = "https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Linux-arm64"

[[plugins.downloads.hadolint.system]]
cpu = "x86_64"
os = "macos"
url = "https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Darwin-x86_64"

[[plugins.downloads.hadolint.system]]
cpu = "aarch64"
os = "macos"
url = "https://github.com/hadolint/hadolint/releases/download/v${version}/hadolint-Darwin-x86_64"

[plugins.definitions.hadolint]
downloads = ["hadolint"]
file_types = ["docker"]
config_files = [".hadolint.yaml", ".hadolint.yml"]
version_command = "hadolint --version"
recommended = true

[plugins.definitions.hadolint.drivers.lint]
script = "hadolint ${target} -f json --no-fail"
success_codes = [0]
output = "stdout"
output_format = "hadolint"
cache_results = true
batch = true
